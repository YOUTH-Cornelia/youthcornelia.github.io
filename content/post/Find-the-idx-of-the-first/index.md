---
title: "Find the Index of the First Occurrence in a String"
date: 2026-01-31
draft: false
categories: ["LeetCode"]
tags: ["String", "Two pointer", "String match"]
leetcode_id: 28
---

## Description: 
[Leetcode 28: Find the Index of the First Occurrence in a String](https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/description/?envType=study-plan-v2&envId=programming-skills)
# LeetCode 28ï¼šä»ã€Œå®Œå…¨æƒ³ä¸åˆ°ã€åˆ°ã€Œå›ºå®šèµ·ç‚¹ + åç§»é‡ã€

> è¿™ç¯‡æ–‡ç« è®°å½•æˆ‘**ç¬¬ä¸€æ¬¡çœŸæ­£æƒ³é€šæš´åŠ›å­—ç¬¦ä¸²åŒ¹é…æ˜¯æ€ä¹ˆâ€œä»é›¶å¼€å§‹æƒ³å‡ºæ¥çš„â€**ã€‚
> ä¸æ˜¯ KMPï¼Œä¸æ˜¯ç®—æ³•æŠ€å·§ï¼Œè€Œæ˜¯äººç±»æ€ç»´æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥è¢«é€¼å‡ºæ¥çš„ã€‚


## ä¸€ã€æˆ‘ä¸€å¼€å§‹ä¸ºä»€ä¹ˆå®Œå…¨æƒ³ä¸åˆ°ï¼Ÿ

é¢˜ç›®æ˜¯ LeetCode 28ï¼š

> æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡

åˆšçœ‹åˆ°çš„æ—¶å€™ï¼Œæˆ‘çš„çœŸå®çŠ¶æ€æ˜¯ï¼š

* æˆ‘çŸ¥é“è¿™æ˜¯â€œå­—ç¬¦ä¸²åŒ¹é…â€
* æˆ‘çŸ¥é“ç­”æ¡ˆå¯èƒ½æ˜¯æš´åŠ›
* ä½†æˆ‘**å®Œå…¨å†™ä¸å‡º**ç±»ä¼¼

  ```python
  haystack[i + j] == needle[j]
  ```
* æˆ‘ç”šè‡³ä¸çŸ¥é“è¿™ä¸ª `i + j` æ˜¯æ€ä¹ˆå†’å‡ºæ¥çš„

è¿™è®©æˆ‘ä¸€åº¦æ€€ç–‘ï¼š
**æ˜¯ä¸æ˜¯æˆ‘æ²¡æœ‰â€œç¼–ç¨‹æ€æƒ³â€ï¼Ÿ**

åæ¥æˆ‘å‘ç°ï¼Œé—®é¢˜æ ¹æœ¬ä¸æ˜¯æˆ‘ä¸ä¼šå†™ä»£ç ï¼Œ
è€Œæ˜¯æˆ‘**æ²¡æœ‰æŠŠã€Œäººç±»åŠ¨ä½œã€ç¿»è¯‘æˆã€ŒçŠ¶æ€å˜é‡ã€**ã€‚


## äºŒã€å…ˆæŠŠé¢˜ç›®ç¿»è¯‘æˆä¸€å¥äººè¯

åœ¨å†™ä»»ä½•ä»£ç ä¹‹å‰ï¼Œæˆ‘å¼ºè¿«è‡ªå·±åªæƒ³ä¸€å¥è¯ï¼š

> **æˆ‘è¦çŸ¥é“ï¼š
> å°å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å®Œæ•´åœ°å‡ºç°åœ¨å¤§å­—ç¬¦ä¸²çš„å“ªé‡Œ**

å…³é”®è¯åªæœ‰ä¸‰ä¸ªï¼š

* **ç¬¬ä¸€æ¬¡**
* **å®Œæ•´**
* **è¿ç»­**

è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒç›´æ¥æ’é™¤äº†ï¼š

* å­åºåˆ—
* ä¸è¿ç»­åŒ¹é…
* è·³ç€æ‰¾

## ä¸‰ã€äººç±»æ˜¯æ€ä¹ˆæ‰¾å­—ç¬¦ä¸²çš„ï¼Ÿï¼ˆæ²¡æœ‰ç®—æ³•ï¼‰

å¦‚æœæˆ‘ç”¨çœ¼ç›åœ¨ä¸€æ®µæ–‡å­—é‡Œæ‰¾ä¸€ä¸ªè¯ï¼Œæˆ‘ä¸€å®šä¼šè¿™æ ·åšï¼š

1. ä»ç¬¬ 0 ä¸ªå­—ç¬¦å¼€å§‹
2. å‡è®¾ï¼šè¿™é‡Œæ˜¯èµ·ç‚¹
3. ä»è¿™é‡Œå¼€å§‹ï¼Œä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦å¾€åå¯¹
4. åªè¦æœ‰ä¸€ä¸ªä¸ä¸€æ ·ï¼Œå°±æ”¾å¼ƒè¿™ä¸ªèµ·ç‚¹
5. æ¢ä¸‹ä¸€ä¸ªä½ç½®ç»§ç»­è¯•

æ³¨æ„ï¼š
**è¿™é‡Œæ²¡æœ‰ä»»ä½•ç®—æ³•ï¼Œåªæœ‰â€œè¯•â€ã€‚**

## å››ã€ç¬¬ä¸€å±‚æ€ç»´è‡ªç„¶å‡ºç°ï¼šæšä¸¾èµ·ç‚¹

æ—¢ç„¶æˆ‘è¦â€œè¯•â€ï¼Œé‚£æˆ‘ä¸€å®šè¦è¯•æ‰€æœ‰**å¯èƒ½çš„èµ·ç‚¹**ã€‚

äºæ˜¯ç¬¬ä¸€ä¸ªå˜é‡è‡ªç„¶å‡ºç°äº†ï¼š

```text
i = å½“å‰å‡è®¾çš„èµ·ç‚¹
```

ä¹Ÿå°±æ˜¯è¯´ï¼š

* `i = 0`ï¼Œè¯•ä¸€æ¬¡
* `i = 1`ï¼Œå†è¯•ä¸€æ¬¡
* `i = 2`ï¼Œå†è¯•ä¸€æ¬¡

åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæˆ‘è¿˜å®Œå…¨æ²¡æœ‰â€œåŒæŒ‡é’ˆâ€çš„æ¦‚å¿µã€‚


## äº”ã€å…³é”®å¡ç‚¹ï¼šæˆ‘æ€ä¹ˆæè¿°â€œä»èµ·ç‚¹å¾€åä¸€ä¸ªä¸ªæ¯”â€ï¼Ÿ

è¿™æ˜¯æˆ‘çœŸæ­£å¡ä½çš„åœ°æ–¹ã€‚

å½“æˆ‘ç«™åœ¨èµ·ç‚¹ `i` æ—¶ï¼Œæˆ‘è„‘å­é‡Œåœ¨åšçš„æ˜¯ï¼š

> â€œä»è¿™é‡Œå¼€å§‹ï¼Œ
> ç¬¬ 1 ä¸ªå­—ç¬¦å¯¹ä¸å¯¹ï¼Ÿ
> ç¬¬ 2 ä¸ªå­—ç¬¦å¯¹ä¸å¯¹ï¼Ÿ
> ç¬¬ 3 ä¸ªå­—ç¬¦å¯¹ä¸å¯¹ï¼Ÿâ€

æ³¨æ„è¿™é‡Œéšå«äº†ä¸€ä¸ªé—®é¢˜ï¼š

> **â€œç¬¬å‡ ä¸ªï¼Ÿâ€**

ä¸€æ—¦æˆ‘æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ‰å‘ç°ï¼š
**æˆ‘éœ€è¦ä¸€ä¸ªå˜é‡æ¥è®°å½•ï¼šæˆ‘å·²ç»æ¯”åˆ°ç¬¬å‡ ä¸ªå­—ç¬¦äº†ã€‚**


## å…­ã€ç¬¬äºŒä¸ªå˜é‡ä¸æ˜¯æŠ€å·§ï¼Œæ˜¯â€œè¢«é€¼å‡ºæ¥çš„â€

äºæ˜¯ç¬¬äºŒä¸ªå˜é‡è‡ªç„¶å‡ºç°äº†ï¼š

```text
j = ä»èµ·ç‚¹ i å¼€å§‹ï¼Œå·²ç»å‘åèµ°äº†å‡ æ­¥
```

è¿™ä¸€æ­¥éå¸¸å…³é”®ï¼š

* `i` è´Ÿè´£ **â€œä»å“ªé‡Œå¼€å§‹â€**
* `j` è´Ÿè´£ **â€œå·²ç»æ¯”äº†å¤šå°‘ä¸ªâ€**

è¿™æ—¶å€™æˆ‘æ‰çœŸæ­£ç†è§£ï¼š

> **`j` ä¸æ˜¯å¦ä¸€ä¸ªèµ·ç‚¹
> è€Œæ˜¯ã€Œåç§»é‡ã€**


## ä¸ƒã€`i + j` æ˜¯æ€ä¹ˆâ€œä¸å¯é¿å…â€åœ°å‡ºç°çš„ï¼Ÿ

ç°åœ¨é—®é¢˜åªå‰©ä¸€ä¸ªï¼š

> needle çš„ç¬¬ `j` ä¸ªå­—ç¬¦ï¼Œ
> è¦å’Œ haystack çš„å“ªä¸€ä¸ªå­—ç¬¦æ¯”ï¼Ÿ

ç­”æ¡ˆåªèƒ½æ˜¯ï¼š

```text
èµ·ç‚¹ + åç§»é‡
```

äºæ˜¯ï¼Œå”¯ä¸€åˆç†çš„æ¯”è¾ƒæ–¹å¼å°±æ˜¯ï¼š

```python
haystack[i + j] == needle[j]
```

è¿™ä¸æ˜¯æŠ€å·§ï¼Œä¹Ÿä¸æ˜¯çµæ„Ÿï¼Œ
è€Œæ˜¯**ä½ æŠŠä¸¤ä¸ªè§’è‰²æƒ³æ¸…æ¥šåçš„å”¯ä¸€å†™æ³•**ã€‚


## å…«ã€è¿™å…¶å®æ˜¯ã€ŒåŒæŒ‡é’ˆã€çš„æœ€åŸå§‹å½¢æ€

ç°åœ¨å›å¤´çœ‹ï¼Œå…¶å®å·²ç»å‡ºç°äº†ä¸¤ä¸ªæŒ‡é’ˆï¼š

* `i`ï¼šèµ·ç‚¹ï¼ˆè¿™ä¸€è½®å›ºå®šï¼‰
* `j`ï¼šåç§»é‡ï¼ˆä¸æ–­å¢åŠ ï¼‰

ä½†é‡è¦çš„æ˜¯ï¼š

> **æˆ‘ä¸æ˜¯â€œå†³å®šç”¨åŒæŒ‡é’ˆâ€ï¼Œ
> è€Œæ˜¯â€œä¸€ä¸ªå˜é‡ä¸å¤Ÿç”¨äº†â€ã€‚**

åŒæŒ‡é’ˆä¸æ˜¯ç®—æ³•å‡çº§ï¼Œ
è€Œæ˜¯**çŠ¶æ€æè¿°å‡çº§**ã€‚

## ä¹ã€å®Œæ•´çš„æš´åŠ›å­—ç¬¦ä¸²åŒ¹é…ï¼ˆæœ€ç»ˆç‰ˆï¼‰

```python
class Solution:
    def strStr(self, haystack: str, needle: str) -> int:
        n, m = len(haystack), len(needle)
        if m == 0:
            return 0

        for i in range(n - m + 1):      # iï¼šèµ·ç‚¹
            j = 0                       # jï¼šåç§»é‡
            while j < m and haystack[i + j] == needle[j]:
                j += 1
            if j == m:                  # å…¨éƒ¨åŒ¹é…å®Œæˆ
                return i

        return -1
```

## åã€å’Œâ€œæ»‘åŠ¨çª—å£â€åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ

åæ¥æˆ‘æ‰æ„è¯†åˆ°ï¼š

```python
haystack[i:i+m] == needle
```

æœ¬è´¨ä¸Šåšçš„æ˜¯**åŒä¸€ä»¶äº‹**ï¼š

* å›ºå®šèµ·ç‚¹ `i`
* æ£€æŸ¥ä» `i` å¼€å§‹çš„ä¸€æ•´æ®µ

åŒºåˆ«åªæ˜¯ï¼š

* ä¸Šé¢ä»£ç æ˜¯ **æ˜¾å¼é€å­—ç¬¦æ¯”è¾ƒ**
* åˆ‡ç‰‡æ˜¯ **æŠŠæ¯”è¾ƒå°è£…ç»™è¯­è¨€**

ğŸ‘‰ **ä¸æ˜¯ä¸¤ç§æ€ç»´ï¼Œè€Œæ˜¯ä¸€ç§æ€ç»´çš„ä¸¤ç§å†™æ³•ã€‚**


## åä¸€ã€è¿™é“é¢˜æ ¹æœ¬è¿˜æ²¡ç”¨åˆ° KMP

KMP åšçš„äº‹æƒ…æ˜¯ï¼š

> **å¤±è´¥åï¼Œå°½é‡ä¸è¦ä»ä¸‹ä¸€ä¸ªèµ·ç‚¹é‡æ–°æ¥**

è€Œè¿™é“é¢˜é‡Œï¼Œæˆ‘åšçš„æ˜¯ï¼š

> **å¤±è´¥äº†å°±è€è€å®å®æ¢ä¸‹ä¸€ä¸ªèµ·ç‚¹**

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼š

* æš´åŠ›èƒ½è¿‡
* æ»‘åŠ¨çª—å£èƒ½è¿‡
* å®Œå…¨ä¸éœ€è¦ KMP


## åäºŒã€æˆ‘çœŸæ­£å­¦åˆ°çš„ä¸æ˜¯è¿™é“é¢˜

è¿™é“é¢˜è®©æˆ‘çœŸæ­£å­¦åˆ°çš„æ˜¯ä¸€å¥è¯ï¼š

> **å½“ä½ åœ¨ä»£ç é‡Œå†™å‡º `i + j`ï¼Œ
> é‚£ä¸æ˜¯æŠ€å·§ï¼Œ
> è€Œæ˜¯ä½ å·²ç»æ¸…æ¥šåŒºåˆ†äº†ï¼š
> èµ·ç‚¹ å’Œ åç§»é‡ã€‚**

è€Œè¿™ä»¶äº‹ï¼Œä¼šåå¤å‡ºç°åœ¨ï¼š

* å­ä¸²
* å­æ•°ç»„
* è¿ç»­åŒ¹é…
* åŒæŒ‡é’ˆé—®é¢˜çš„èµ·æºå½¢æ€

## æ€»ç»“ä¸€å¥è¯

> **æš´åŠ›å­—ç¬¦ä¸²åŒ¹é…ä¸æ˜¯â€œæƒ³å‡ºæ¥çš„â€ï¼Œ
> è€Œæ˜¯åœ¨æœ€æœ´ç´ çš„æ‰¾æ³•é‡Œï¼Œ
> è¢«ä¸€æ­¥ä¸€æ­¥é€¼å‡ºæ¥çš„ã€‚**